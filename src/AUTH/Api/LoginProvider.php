<?php
namespace AUTH\Api;

use AUTH\Api\base\LoginProviderBaseApi;
use AUTH\Models\Map\LoginProviderTableMap;

/**
* Class AUTH
* @package AUTH\Api
* @author Fran LÃ³pez <fran.lopez84@hotmail.es>
* @version 1.0
* @Api LoginProvider
* @visible false
* Autogenerated controller [2017-02-20 00:39:30]
*/
class LoginProvider extends LoginProviderBaseApi
{
    public static function getListNameSql() {
        $sql = 'CONCAT("[", UPPER(' . LoginProviderTableMap::COL_CUSTOMER_CODE . '), "] ", ';
        $closeSql = '';
        foreach(LoginProviderTableMap::getValueSet(LoginProviderTableMap::COL_NAME) as $index => $value) {
            $sql .= 'IF(' . LoginProviderTableMap::COL_NAME . ' = ' . $index . ', "' . ucfirst($value) . '", ';
            $closeSql .= ')';
        }
        $sql .= '"Error"';
        $closeSql .= ', " [", IF(' . LoginProviderTableMap::COL_DEV . ' = 0, "Prod", "Dev"), "] [", IFNULL('.LoginProviderTableMap::COL_PARENT_REF.', "ALL"), "]")';
        return $sql . $closeSql;
    }

    public function init()
    {
        parent::init();
        $this->extraColumns = [
            self::getListNameSql() => self::API_LIST_NAME_FIELD,
        ];
    }
}