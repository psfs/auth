<?xml version="1.0" encoding="UTF-8"?>
<database name="Auth" defaultIdMethod="native" namespace="PSFS\Auth\Models" tablePrefix="Auth_">
    <vendor type="mysql">
        <parameter name="Engine" value="InnoDB"/>
        <parameter name="Charset" value="utf8"/>
    </vendor>
    <table name="ACCOUNTS" phpName="Account" description="Table that stores the accounts associated to the social network">
        <column name="ID_ACCOUNT" phpName="IdAccount" primaryKey="true" autoIncrement="true" type="INTEGER" />
        <column name="ID_USER" phpName="IdUser" type="INTEGER" size="11" required="true" />
        <column name="ID_EXTERNAL" phpName="IdExternal" type="VARCHAR" size="255" required="true" />
        <column name="TYPE" phpName="Type" type="INTEGER" size="1" defaultValue="0" />
        <column name="ACCESS_TOKEN" phpName="AccessToken" type="VARCHAR" size="255" required="true" />
        <column name="REFRESH_TOKEN" phpName="RefreshToken" type="VARCHAR" size="255" />
        <column name="EXPIRES" phpName="Expires" type="VARCHAR" size="10" defaultValue="0" />
        <behavior name="timestampable" />
        <behavior name="archivable" />
        <behavior name="query_cache" />
        <index name="auth_accounts_idx">
            <index-column name="ID_EXTERNAL" />
            <index-column name="ID_USER" />
            <index-column name="TYPE" />
        </index>
        <unique name="auth_accounts_unique_idx">
            <unique-column name="TYPE" />
            <unique-column name="ID_EXTERNAL" />
        </unique>
    </table>
    <table name="SESSIONS" phpName="Session" description="Table that stores the active sessions for users">
        <column name="ID_SESSION" phpName="IdSession" primaryKey="true" autoIncrement="true" type="INTEGER" />
        <column name="ID_USER" phpName="IdUser" type="INTEGER" size="11" required="true" />
        <column name="IP" phpName="Ip" type="VARCHAR" size="15" required="true" />
        <column name="TOKEN" phpName="Token" type="VARCHAR" size="100" required="true" />
        <column name="REFRESH_TOKEN" phpName="RefreshToken" type="VARCHAR" size="255" />
        <behavior name="timestampable" />
        <behavior name="archivable" />
        <behavior name="query_cache" />
        <index name="auth_sessions_idx">
            <index-column name="TOKEN" />
            <index-column name="REFRESH_TOKEN" />
        </index>
        <unique name="auth_sessions_unique_idx">
            <unique-column name="TOKEN" />
        </unique>
    </table>
</database>
